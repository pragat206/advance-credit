<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Loans & Financial Products - Advance Credit | Expert Debt Consolidation</title>
    <meta name="description" content="Get the best Personal Loan rates for debt consolidation. Expert financial advisory for weak profiles. Transform multiple EMIs into one manageable payment with trusted banks.">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <style>
        :root {
            --primary-blue: #1e3a8a;
            --secondary-blue: #3b82f6;
            --accent-blue: #1e40af;
            --light-blue: #dbeafe;
            --white: #ffffff;
            --dark-text: #1f2937;
            --gray-text: #6b7280;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            color: var(--dark-text);
            background: var(--white);
        }
        
        .navbar {
            background: var(--white) !important;
            box-shadow: 0 2px 10px rgba(30, 58, 138, 0.1);
            border-bottom: 1px solid #e5e7eb;
        }
        
        .navbar-brand {
            color: var(--primary-blue) !important;
            font-weight: 700;
            font-size: 1.5rem;
        }
        
        .nav-link {
            color: var(--dark-text) !important;
            font-weight: 500;
            transition: color 0.2s;
        }
        
        .nav-link:hover {
            color: var(--secondary-blue) !important;
        }
        
        .btn-primary {
            background: var(--primary-blue);
            border-color: var(--primary-blue);
            color: var(--white);
            font-weight: 600;
            padding: 12px 24px;
            border-radius: 8px;
            transition: all 0.2s;
        }
        
        .btn-primary:hover {
            background: var(--accent-blue);
            border-color: var(--accent-blue);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(30, 58, 138, 0.3);
        }
        
        .btn-outline-primary {
            color: var(--primary-blue);
            border-color: var(--primary-blue);
            font-weight: 600;
        }
        
        .btn-outline-primary:hover {
            background: var(--primary-blue);
            border-color: var(--primary-blue);
        }
        
        .text-primary {
            color: var(--primary-blue) !important;
        }
        
        .bg-primary {
            background: var(--primary-blue) !important;
        }
        
        .bg-light-blue {
            background: var(--light-blue);
        }
        
        .text-accent { 
            color: var(--primary-blue) !important; 
        }
        
        .btn-accent { 
            background: var(--primary-blue) !important; 
            color: var(--white) !important; 
            border: none; 
            font-weight: 600;
            padding: 12px 24px;
            border-radius: 8px;
            transition: all 0.2s;
        }
        
        .btn-accent:hover, .btn-accent:focus { 
            background: var(--accent-blue) !important; 
            color: var(--white) !important; 
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(30, 58, 138, 0.3);
        }
        
        .accent-fill { 
            fill: var(--primary-blue) !important; 
        }
        
        /* Hero Section */
        .hero-section {
            background: linear-gradient(135deg, var(--primary-blue) 0%, var(--accent-blue) 100%);
            color: var(--white);
            padding: 100px 0 80px;
            position: relative;
            overflow: hidden;
        }
        
        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="50" cy="50" r="1" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            opacity: 0.1;
        }
        
        /* Personal Loan Hero Card */
        .hero-personal-loan {
            background: var(--white);
            border-radius: 20px;
            padding: 3rem;
            box-shadow: 0 20px 40px rgba(30, 58, 138, 0.15);
            position: relative;
            overflow: hidden;
            margin-top: 2rem;
        }
        
        .hero-personal-loan::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-blue), var(--accent-blue));
        }
        
        .hero-personal-loan .hero-badge {
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-blue));
            color: var(--white);
            padding: 0.5rem 1rem;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 1rem;
        }
        
        .hero-personal-loan .hero-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--dark-text);
            margin-bottom: 1rem;
        }
        
        .hero-personal-loan .hero-subtitle {
            font-size: 1.1rem;
            color: var(--gray-text);
            margin-bottom: 2rem;
        }
        
        .hero-features {
            display: flex;
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .hero-feature {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--dark-text);
            font-weight: 500;
        }
        
        .hero-feature i {
            color: var(--primary-blue);
            font-size: 1.2rem;
        }
        
        /* Glass Cards */
        .glass-card {
            background: var(--white);
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: all 0.2s;
            padding: 2rem;
        }
        
        .glass-card:hover {
            box-shadow: 0 8px 25px rgba(30, 58, 138, 0.15);
            transform: translateY(-2px);
        }
        
        /* Loan Product Cards */
        .loan-product-card {
            background: var(--white);
            color: var(--dark-text);
            border-radius: 16px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            border: 1px solid #e5e7eb;
            transition: all 0.3s ease;
            min-height: 380px;
            position: relative;
            overflow: hidden;
            padding: 2rem;
        }
        
        .loan-product-card:hover {
            box-shadow: 0 12px 30px rgba(30, 58, 138, 0.15);
            transform: translateY(-4px);
        }
        
        .loan-product-card.featured {
            border: 2px solid var(--primary-blue);
            background: linear-gradient(135deg, var(--white) 0%, var(--light-blue) 100%);
        }
        
        .loan-product-accent {
            position: absolute; 
            left: 0; 
            top: 0; 
            height: 100%; 
            width: 4px; 
            background: var(--primary-blue); 
            border-radius: 16px 0 0 16px;
        }
        
        .loan-product-logo {
            width: 60px; 
            height: 60px; 
            background: var(--light-blue); 
            border-radius: 50%; 
            object-fit: contain; 
            box-shadow: 0 4px 12px rgba(30, 58, 138, 0.15); 
            margin-bottom: 1rem;
            border: 2px solid var(--primary-blue);
        }
        
        .loan-product-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--dark-text);
            margin-bottom: 0.5rem;
            letter-spacing: 0.2px;
        }
        
        .loan-product-bank {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--primary-blue);
            margin-bottom: 0.5rem;
        }
        
        .loan-product-details {
            font-size: 1rem;
            color: var(--gray-text);
            margin-bottom: 1rem;
            line-height: 1.6;
        }
        
        .loan-product-card .badge {
            font-size: 0.9rem;
            padding: 0.4em 0.8em;
            border-radius: 1em;
            background: var(--primary-blue);
            color: var(--white);
            font-weight: 600;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
        }
        
        .loan-product-card ul {
            margin-bottom: 1.5rem;
            padding-left: 1.2rem;
        }
        
        .loan-product-card li {
            font-size: 0.95rem;
            color: var(--gray-text);
            margin-bottom: 0.4rem;
            line-height: 1.5;
        }
        
        .loan-product-card .bi-check-circle {
            color: #10b981;
            margin-right: 0.5rem;
        }
        
        .loan-product-card .apply-modal-btn, .loan-product-card .btn-emi-calc {
            font-size: 1rem;
            font-weight: 600;
            border-radius: 8px;
            padding: 0.8em 1.5em;
            transition: all 0.2s;
        }
        
        .loan-product-card .apply-modal-btn {
            background: var(--primary-blue);
            color: var(--white);
            border: none;
        }
        
        .loan-product-card .apply-modal-btn:hover {
            background: var(--accent-blue);
            color: var(--white);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(30, 58, 138, 0.3);
        }
        
        .loan-product-card .btn-emi-calc {
            background: var(--white);
            color: var(--primary-blue);
            border: 2px solid var(--primary-blue);
        }
        
        .loan-product-card .btn-emi-calc:hover {
            background: var(--primary-blue);
            color: var(--white);
            transform: translateY(-1px);
        }
        
        /* Filter Buttons */
        .loan-filter-btn {
            border: 2px solid var(--primary-blue) !important;
            color: var(--primary-blue) !important;
            background: transparent !important;
            font-weight: 600;
            border-radius: 8px;
            transition: all 0.2s;
            padding: 0.6rem 1.2rem;
        }
        
        .loan-filter-btn:hover, .loan-filter-btn.active {
            background: var(--primary-blue) !important;
            color: var(--white) !important;
            box-shadow: 0 4px 12px rgba(30, 58, 138, 0.3);
        }
        
        /* Trust Indicators */
        .trust-indicators {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin: 2rem 0;
        }
        
        .trust-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--white);
            font-weight: 500;
        }
        
        .trust-indicator i {
            font-size: 1.2rem;
        }
        
        /* Features Section */
        .features-section {
            background: var(--light-blue);
            padding: 4rem 0;
        }
        
        .feature-card {
            background: var(--white);
            border-radius: 16px;
            padding: 2rem;
            text-align: center;
            box-shadow: 0 4px 16px rgba(30, 58, 138, 0.08);
            transition: all 0.3s ease;
            height: 100%;
        }
        
        .feature-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(30, 58, 138, 0.15);
        }
        
        .feature-icon {
            width: 80px;
            height: 80px;
            background: var(--light-blue);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            border: 2px solid var(--primary-blue);
        }
        
        .feature-icon i {
            font-size: 2rem;
            color: var(--primary-blue);
        }
        
        /* CTA Section */
        .cta-section {
            background: linear-gradient(135deg, var(--primary-blue) 0%, var(--accent-blue) 100%);
            color: var(--white);
            padding: 4rem 0;
            text-align: center;
        }
        
        .footer-dark { 
            background: var(--dark-text); 
            color: var(--white);
        }
        
        @media (max-width: 768px) {
            .hero-personal-loan {
                padding: 2rem;
                margin-top: 1rem;
            }
            
            .hero-personal-loan .hero-title {
                font-size: 2rem;
            }
            
            .hero-features {
                flex-direction: column;
                gap: 1rem;
            }
            
            .trust-indicators {
                flex-direction: column;
                gap: 1rem;
            }
            
            .loan-product-card {
                min-height: auto;
                padding: 1.5rem;
            }
        }
    </style>
</head>
<body>
{% include 'navbar.html' %}

<div class="page-content">
    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container position-relative" style="z-index: 2;">
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <h1 class="display-4 fw-bold mb-4">Personal Loans for Debt Consolidation</h1>
                    <p class="lead mb-4">Transform multiple EMIs into one manageable payment. Get the best Personal Loan rates from trusted banks and improve your financial health.</p>
                    
                    <div class="trust-indicators">
                        <div class="trust-indicator">
                            <i class="bi bi-shield-check"></i>
                            <span>Regulated & Licensed</span>
                        </div>
                        <div class="trust-indicator">
                            <i class="bi bi-graph-up"></i>
                            <span>High Success Rate</span>
                        </div>
                        <div class="trust-indicator">
                            <i class="bi bi-clock"></i>
                            <span>Quick Processing</span>
                        </div>
                    </div>
                    
                    <div class="d-flex gap-3 mt-4">
                        <a href="#personal-loans" class="btn btn-light btn-lg">View Personal Loans</a>
                        <a href="/emi" class="btn btn-outline-light btn-lg">EMI Calculator</a>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="hero-personal-loan">
                        <div class="hero-badge">
                            <i class="bi bi-star-fill me-2"></i>Most Popular
                        </div>
                        <h2 class="hero-title">Personal Loan</h2>
                        <p class="hero-subtitle">Consolidate your debts and reduce monthly payments by up to 40%</p>
                        
                        <div class="hero-features">
                            <div class="hero-feature">
                                <i class="bi bi-check-circle"></i>
                                <span>₹5L - ₹25L</span>
                            </div>
                            <div class="hero-feature">
                                <i class="bi bi-percent"></i>
                                <span>10.49% - 18%</span>
                            </div>
                            <div class="hero-feature">
                                <i class="bi bi-calendar"></i>
                                <span>12-60 months</span>
                            </div>
                        </div>
                        
                        <div class="d-flex gap-2">
                            <button class="btn btn-primary" onclick="showPersonalLoanModal()">Apply Now</button>
                            <button class="btn btn-outline-primary" onclick="calculateEMI('₹5L - ₹25L', '10.49% - 18%', '12-60 months')">Calculate EMI</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Personal Loans Section -->
    <section id="personal-loans" class="py-5">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="display-5 fw-bold text-primary mb-3">Personal Loans for Debt Consolidation</h2>
                <p class="lead text-muted">Choose from our curated selection of Personal Loans designed to help you consolidate debt and improve your financial health.</p>
            </div>
            
            <!-- Filter Buttons -->
            <div class="d-flex flex-wrap justify-content-center mb-5 gap-2">
                <button class="btn loan-filter-btn active" data-type="all">All Loans</button>
                <button class="btn loan-filter-btn" data-type="personal">Personal Loan</button>
                <button class="btn loan-filter-btn" data-type="home">Home Loan</button>
                <button class="btn loan-filter-btn" data-type="car">Car Loan</button>
                <button class="btn loan-filter-btn" data-type="business">Business Loan</button>
                <button class="btn loan-filter-btn" data-type="other">Other</button>
            </div>
            
            <!-- Loan Products Grid -->
            <div id="loanCards" class="row g-4">
                <!-- Loan cards will be populated by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features-section">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="display-5 fw-bold text-primary mb-3">Why Choose Our Financial Advisory?</h2>
                <p class="lead text-muted">Expert guidance to help you make the right financial decisions</p>
            </div>
            
            <div class="row g-4">
                <div class="col-md-6 col-lg-3">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="bi bi-graph-up-arrow"></i>
                        </div>
                        <h5 class="fw-bold mb-3">Debt Consolidation</h5>
                        <p class="text-muted">Transform multiple EMIs into one manageable payment and reduce your monthly outflow by up to 40%.</p>
                    </div>
                </div>
                <div class="col-md-6 col-lg-3">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="bi bi-person-check"></i>
                        </div>
                        <h5 class="fw-bold mb-3">Weak Profile Support</h5>
                        <p class="text-muted">Specialized assistance for applicants with poor credit scores or multiple loan rejections.</p>
                    </div>
                </div>
                <div class="col-md-6 col-lg-3">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="bi bi-calculator"></i>
                        </div>
                        <h5 class="fw-bold mb-3">Financial Planning</h5>
                        <p class="text-muted">Personalized strategies and expert advice for long-term financial health and credit building.</p>
                    </div>
                </div>
                <div class="col-md-6 col-lg-3">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="bi bi-headset"></i>
                        </div>
                        <h5 class="fw-bold mb-3">24/7 Support</h5>
                        <p class="text-muted">Round-the-clock assistance from our financial advisors to guide you through every step.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="cta-section">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8 text-center">
                    <h2 class="fw-bold mb-4">Ready to Transform Your Financial Health?</h2>
                    <p class="lead mb-4">Get expert guidance on debt consolidation and find the perfect Personal Loan for your needs. Our financial advisors are here to help you every step of the way.</p>
                    <div class="d-flex justify-content-center gap-3">
                        <a href="#" class="btn btn-light btn-lg" data-bs-toggle="modal" data-bs-target="#contactModal">Get Free Consultation</a>
                        <a href="/emi" class="btn btn-outline-light btn-lg">Calculate Your EMI</a>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>

<!-- Loan Application Modal -->
<div class="modal fade" id="loanApplicationModal" tabindex="-1" aria-labelledby="loanApplicationModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content" style="border-radius: 12px;">
            <div class="modal-header border-0">
                <h4 class="modal-title text-primary" id="loanApplicationModalLabel">Apply for Loan</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="loanApplicationForm">
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label for="applicantName" class="form-label">Full Name <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="applicantName" name="name" required>
                        </div>
                        <div class="col-md-6">
                            <label for="applicantPhone" class="form-label">Phone Number <span class="text-danger">*</span></label>
                            <input type="tel" class="form-control" id="applicantPhone" name="phone" maxlength="10" pattern="\d{10}" required>
                        </div>
                        <div class="col-md-6">
                            <label for="applicantEmail" class="form-label">Email Address</label>
                            <input type="email" class="form-control" id="applicantEmail" name="email">
                        </div>
                        <div class="col-md-6">
                            <label for="loanAmount" class="form-label">Required Loan Amount <span class="text-danger">*</span></label>
                            <input type="number" class="form-control" id="loanAmount" name="loan_amount" min="10000" step="1000" required>
                        </div>
                        <div class="col-md-6">
                            <label for="monthlyIncome" class="form-label">Monthly Income <span class="text-danger">*</span></label>
                            <input type="number" class="form-control" id="monthlyIncome" name="monthly_income" min="10000" step="1000" required>
                        </div>
                        <div class="col-md-6">
                            <label for="employmentType" class="form-label">Employment Type <span class="text-danger">*</span></label>
                            <select class="form-select" id="employmentType" name="employment_type" required>
                                <option value="">Select Employment Type</option>
                                <option value="salaried">Salaried</option>
                                <option value="self-employed">Self Employed</option>
                                <option value="business-owner">Business Owner</option>
                                <option value="professional">Professional</option>
                            </select>
                        </div>
                        <div class="col-12">
                            <label for="loanPurpose" class="form-label">Loan Purpose <span class="text-danger">*</span></label>
                            <select class="form-select" id="loanPurpose" name="loan_purpose" required>
                                <option value="">Select Loan Purpose</option>
                                <option value="debt-consolidation">Debt Consolidation</option>
                                <option value="personal-expenses">Personal Expenses</option>
                                <option value="home-renovation">Home Renovation</option>
                                <option value="education">Education</option>
                                <option value="medical">Medical</option>
                                <option value="business">Business</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="col-12">
                            <label for="additionalInfo" class="form-label">Additional Information</label>
                            <textarea class="form-control" id="additionalInfo" name="additional_info" rows="3" placeholder="Any additional details about your loan requirement..."></textarea>
                        </div>
                    </div>
                    <div class="d-flex gap-2 mt-4">
                        <button type="submit" class="btn btn-primary">Submit Application</button>
                        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- EMI Calculator Modal -->
<div class="modal fade" id="emiCalculatorModal" tabindex="-1" aria-labelledby="emiCalculatorModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content" style="border-radius: 12px;">
            <div class="modal-header border-0">
                <h4 class="modal-title text-primary" id="emiCalculatorModalLabel">EMI Calculator</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row g-4">
                    <div class="col-md-6">
                        <h5 class="mb-3">Calculate Your EMI</h5>
                        <form id="emiCalculatorForm">
                            <div class="mb-3">
                                <label for="emiLoanAmount" class="form-label">Loan Amount (₹)</label>
                                <input type="number" class="form-control" id="emiLoanAmount" value="500000" min="50000" max="10000000" step="10000">
                            </div>
                            <div class="mb-3">
                                <label for="emiInterestRate" class="form-label">Interest Rate (% per annum)</label>
                                <input type="number" class="form-control" id="emiInterestRate" value="12" min="1" max="30" step="0.1">
                            </div>
                            <div class="mb-3">
                                <label for="emiTenure" class="form-label">Loan Tenure (years)</label>
                                <input type="number" class="form-control" id="emiTenure" value="3" min="1" max="10" step="1">
                            </div>
                            <button type="button" class="btn btn-primary" onclick="calculateEMIResult()">Calculate EMI</button>
                        </form>
                    </div>
                    <div class="col-md-6">
                        <div id="emiResult" class="bg-light-blue rounded-3 p-4" style="display: none;">
                            <h5 class="text-primary mb-3">EMI Breakdown</h5>
                            <div class="row g-3">
                                <div class="col-6">
                                    <div class="text-center">
                                        <div class="h4 text-primary mb-1" id="monthlyEMI">₹0</div>
                                        <small class="text-muted">Monthly EMI</small>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="text-center">
                                        <div class="h4 text-primary mb-1" id="totalAmount">₹0</div>
                                        <small class="text-muted">Total Amount</small>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="text-center">
                                        <div class="h4 text-primary mb-1" id="totalInterest">₹0</div>
                                        <small class="text-muted">Total Interest</small>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="text-center">
                                        <div class="h4 text-primary mb-1" id="principalAmount">₹0</div>
                                        <small class="text-muted">Principal Amount</small>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-3">
                                <button type="button" class="btn btn-outline-primary btn-sm" onclick="applyForLoan()">Apply for this Loan</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Success Toast -->
<div class="toast-container position-fixed bottom-0 end-0 p-3">
    <div id="successToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header bg-success text-white">
            <i class="bi bi-check-circle me-2"></i>
            <strong class="me-auto">Success!</strong>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast"></button>
        </div>
        <div class="toast-body">
            Your loan application has been submitted successfully. We'll contact you within 30 minutes.
        </div>
    </div>
</div>

{% include 'footer.html' %}

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
// Loan products data with Personal Loans as priority
const loanProducts = [
    {
        id: 1,
        type: 'personal',
        featured: true,
        title: 'Personal Loan',
        bank: 'Axis Bank',
        logo: '/static/partners/Axis_Bank_logo.png',
        details: 'Consolidate multiple EMIs into one manageable payment. Perfect for debt consolidation and credit building.',
        amount: '₹5L - ₹25L',
        rate: '10.49% - 15.99%',
        tenure: '12-60 months',
        features: [
            'No collateral required',
            'Quick disbursal within 48 hours',
            'Flexible repayment options',
            'Minimal documentation',
            'Competitive interest rates'
        ],
        url: '#'
    },
    {
        id: 2,
        type: 'personal',
        featured: false,
        title: 'Personal Loan',
        bank: 'HDFC Bank',
        logo: '/static/partners/HDFC-Bank-logo.png',
        details: 'Get a Personal Loan with competitive rates and flexible repayment terms for your financial needs.',
        amount: '₹1L - ₹40L',
        rate: '10.99% - 18.50%',
        tenure: '12-84 months',
        features: [
            'Instant approval for existing customers',
            'No prepayment charges after 12 months',
            'Online application process',
            'Competitive interest rates',
            'Flexible EMI options'
        ],
        url: '#'
    },
    {
        id: 3,
        type: 'personal',
        featured: false,
        title: 'Personal Loan',
        bank: 'ICICI Bank',
        logo: '/static/partners/ICICI_Bank_Logo.png',
        details: 'Quick Personal Loan with minimal documentation and competitive interest rates.',
        amount: '₹50K - ₹50L',
        rate: '10.75% - 19.00%',
        tenure: '12-60 months',
        features: [
            'Instant approval for salary account holders',
            'No security or guarantor required',
            'Quick disbursal',
            'Competitive rates',
            'Easy online application'
        ],
        url: '#'
    },
    {
        id: 4,
        type: 'personal',
        featured: false,
        title: 'Personal Loan',
        bank: 'Bajaj Finance',
        logo: '/static/partners/Bajaj-Finance-logo.png',
        details: 'Fast Personal Loan approval with minimal documentation and competitive rates.',
        amount: '₹25K - ₹25L',
        rate: '11.99% - 18.00%',
        tenure: '12-60 months',
        features: [
            'Quick approval process',
            'Minimal documentation',
            'Competitive interest rates',
            'Flexible repayment options',
            'No prepayment charges'
        ],
        url: '#'
    },
    {
        id: 5,
        type: 'home',
        featured: false,
        title: 'Home Loan',
        bank: 'Axis Bank',
        logo: '/static/partners/Axis_Bank_logo.png',
        details: 'Realize your dream of owning a home with our competitive Home Loan rates.',
        amount: '₹5L - ₹5Cr',
        rate: '8.40% - 9.10%',
        tenure: '5-30 years',
        features: [
            'Competitive interest rates',
            'Long repayment tenure',
            'Tax benefits on interest',
            'Flexible EMI options',
            'Quick processing'
        ],
        url: '#'
    },
    {
        id: 6,
        type: 'car',
        featured: false,
        title: 'Car Loan',
        bank: 'HDFC Bank',
        logo: '/static/partners/HDFC-Bank-logo.png',
        details: 'Drive your dream car with our attractive Car Loan offers and competitive rates.',
        amount: '₹1L - ₹50L',
        rate: '8.75% - 12.50%',
        tenure: '12-84 months',
        features: [
            'Competitive interest rates',
            'Quick approval process',
            'Flexible down payment',
            'No prepayment charges',
            'Wide range of cars covered'
        ],
        url: '#'
    },
    {
        id: 7,
        type: 'business',
        featured: false,
        title: 'Business Loan',
        bank: 'ICICI Bank',
        logo: '/static/partners/ICICI_Bank_Logo.png',
        details: 'Fuel your business growth with our Business Loan products designed for entrepreneurs.',
        amount: '₹5L - ₹2Cr',
        rate: '11.50% - 18.00%',
        tenure: '12-60 months',
        features: [
            'Quick disbursal',
            'Minimal documentation',
            'Flexible repayment',
            'No collateral for small amounts',
            'Competitive rates'
        ],
        url: '#'
    }
];

// Render loan products
function renderLoanProducts(filter = 'all') {
    const container = document.getElementById('loanCards');
    const filteredProducts = filter === 'all' ? loanProducts : loanProducts.filter(p => p.type === filter);
    
    container.innerHTML = filteredProducts.map(product => `
        <div class="col-lg-6 col-xl-4">
            <div class="loan-product-card ${product.featured ? 'featured' : ''}">
                ${product.featured ? '<div class="loan-product-accent"></div>' : ''}
                <div class="d-flex align-items-center mb-3">
                    <img src="${product.logo}" alt="${product.bank} Logo" class="loan-product-logo">
                    <div>
                        <h4 class="loan-product-title mb-1">${product.title}</h4>
                        <div class="loan-product-bank">${product.bank}</div>
                    </div>
                </div>
                <p class="loan-product-details">${product.details}</p>
                <div class="mb-3">
                    <span class="badge">${product.amount}</span>
                    <span class="badge">${product.rate}</span>
                    <span class="badge">${product.tenure}</span>
                </div>
                <ul>
                    ${product.features.map(feature => `<li><i class="bi bi-check-circle"></i>${feature}</li>`).join('')}
                </ul>
                <div class="d-flex gap-2">
                    <button class="btn apply-modal-btn" onclick="showLoanModal(${product.id})">Apply Now</button>
                    <button class="btn btn-emi-calc" onclick="calculateEMI('${product.amount}', '${product.rate}', '${product.tenure}')">Calculate EMI</button>
                </div>
            </div>
        </div>
    `).join('');
}

// Filter functionality
document.addEventListener('DOMContentLoaded', function() {
    renderLoanProducts();
    
    // Filter button functionality
    document.querySelectorAll('.loan-filter-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            document.querySelectorAll('.loan-filter-btn').forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            const filter = this.getAttribute('data-type');
            renderLoanProducts(filter);
        });
    });
});

// Global variables for current product and EMI data
let currentProduct = null;
let currentEMIData = null;

// Modal functions
function showPersonalLoanModal() {
    currentProduct = loanProducts.find(p => p.featured);
    document.getElementById('loanApplicationModalLabel').textContent = `Apply for ${currentProduct.title} - ${currentProduct.bank}`;
    const modal = new bootstrap.Modal(document.getElementById('loanApplicationModal'));
    modal.show();
}

function showLoanModal(productId) {
    currentProduct = loanProducts.find(p => p.id === productId);
    document.getElementById('loanApplicationModalLabel').textContent = `Apply for ${currentProduct.title} - ${currentProduct.bank}`;
    const modal = new bootstrap.Modal(document.getElementById('loanApplicationModal'));
    modal.show();
}

function calculateEMI(amount, rate, tenure) {
    // Parse amount range to get average
    const amountRange = amount.replace(/[₹,]/g, '').split(' - ');
    let avgAmount = 0;
    
    if (amountRange.length === 2) {
        // Handle ranges like "₹5L - ₹25L" or "₹1L - ₹40L"
        const first = amountRange[0].replace(/[L]/g, '000').replace(/[K]/g, '00');
        const second = amountRange[1].replace(/[L]/g, '000').replace(/[K]/g, '00');
        avgAmount = (parseInt(first) + parseInt(second)) / 2;
    } else {
        // Handle single values
        avgAmount = parseInt(amountRange[0].replace(/[L]/g, '000').replace(/[K]/g, '00'));
    }
    
    // Parse rate range to get average and round to 1 decimal place
    const rateRange = rate.replace('%', '').split(' - ');
    let avgRate = 0;
    
    if (rateRange.length === 2) {
        avgRate = (parseFloat(rateRange[0]) + parseFloat(rateRange[1])) / 2;
    } else {
        avgRate = parseFloat(rateRange[0]);
    }
    avgRate = Math.round(avgRate * 10) / 10; // Round to 1 decimal place
    
    // Parse tenure to get years (convert from months if needed)
    const tenureRange = tenure.split(' - ');
    let avgTenure = 0;
    
    if (tenureRange.length === 2) {
        const first = parseInt(tenureRange[0]);
        const second = parseInt(tenureRange[1]);
        
        // Check if tenure is in months (typically 12-120) or years (1-30)
        if (first <= 30 && second <= 30) {
            // Already in years
            avgTenure = (first + second) / 2;
        } else {
            // Convert months to years
            avgTenure = Math.round((first + second) / 2 / 12);
        }
    } else {
        const tenureValue = parseInt(tenureRange[0]);
        avgTenure = tenureValue <= 30 ? tenureValue : Math.round(tenureValue / 12);
    }
    
    // Ensure reasonable limits
    avgAmount = Math.max(50000, Math.min(10000000, avgAmount));
    avgRate = Math.max(1, Math.min(30, avgRate));
    avgTenure = Math.max(1, Math.min(10, avgTenure));
    
    // Set default values in EMI calculator
    document.getElementById('emiLoanAmount').value = avgAmount;
    document.getElementById('emiInterestRate').value = avgRate;
    document.getElementById('emiTenure').value = avgTenure;
    
    const modal = new bootstrap.Modal(document.getElementById('emiCalculatorModal'));
    modal.show();
}

// EMI Calculator functionality
function calculateEMIResult() {
    const principal = parseFloat(document.getElementById('emiLoanAmount').value);
    const rate = parseFloat(document.getElementById('emiInterestRate').value);
    const tenureYears = parseInt(document.getElementById('emiTenure').value);
    
    if (!principal || !rate || !tenureYears) {
        alert('Please fill all fields');
        return;
    }
    
    // Convert years to months for calculation
    const tenureMonths = tenureYears * 12;
    
    // Calculate EMI using formula: EMI = P × r × (1 + r)^n/((1 + r)^n - 1)
    const monthlyRate = rate / 12 / 100;
    const emi = principal * monthlyRate * Math.pow(1 + monthlyRate, tenureMonths) / (Math.pow(1 + monthlyRate, tenureMonths) - 1);
    const totalAmount = emi * tenureMonths;
    const totalInterest = totalAmount - principal;
    
    // Update results with proper formatting
    document.getElementById('monthlyEMI').textContent = '₹' + Math.round(emi).toLocaleString();
    document.getElementById('totalAmount').textContent = '₹' + Math.round(totalAmount).toLocaleString();
    document.getElementById('totalInterest').textContent = '₹' + Math.round(totalInterest).toLocaleString();
    document.getElementById('principalAmount').textContent = '₹' + principal.toLocaleString();
    
    // Store EMI data for application
    currentEMIData = {
        principal: principal,
        rate: rate,
        tenure: tenureYears,
        emi: emi,
        totalAmount: totalAmount,
        totalInterest: totalInterest
    };
    
    // Show results
    document.getElementById('emiResult').style.display = 'block';
}

// Apply for loan from EMI calculator
function applyForLoan() {
    if (currentEMIData) {
        document.getElementById('loanAmount').value = currentEMIData.principal;
        const modal = new bootstrap.Modal(document.getElementById('loanApplicationModal'));
        modal.show();
    }
}

// Form submission handler
document.addEventListener('DOMContentLoaded', function() {
    renderLoanProducts();
    
    // Filter button functionality
    document.querySelectorAll('.loan-filter-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            document.querySelectorAll('.loan-filter-btn').forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            const filter = this.getAttribute('data-type');
            renderLoanProducts(filter);
        });
    });
    
    // Phone number validation
    document.getElementById('applicantPhone').addEventListener('input', function() {
        const value = this.value.replace(/\D/g, '');
        this.value = value;
        
        if (value.length === 10) {
            this.classList.remove('is-invalid');
            this.classList.add('is-valid');
        } else if (value.length > 0) {
            this.classList.remove('is-valid');
            this.classList.add('is-invalid');
        } else {
            this.classList.remove('is-valid', 'is-invalid');
        }
    });
    
    // Loan application form submission
    document.getElementById('loanApplicationForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const formData = new FormData(this);
        formData.append('product_type', currentProduct ? currentProduct.title : 'Personal Loan');
        formData.append('bank_name', currentProduct ? currentProduct.bank : 'Multiple Banks');
        formData.append('source', 'products_page');
        formData.append('form_type', 'loan_application');
        
        // Show loading state
        const submitBtn = this.querySelector('button[type="submit"]');
        const originalText = submitBtn.innerHTML;
        submitBtn.innerHTML = '<i class="bi bi-arrow-clockwise me-2"></i>Submitting...';
        submitBtn.disabled = true;
        
        try {
            const response = await fetch('/contact', {
                method: 'POST',
                body: formData
            });
            
            if (response.ok) {
                // Reset form
                this.reset();
                
                // Close modal
                const modal = bootstrap.Modal.getInstance(document.getElementById('loanApplicationModal'));
                modal.hide();
                
                // Show success toast
                const toast = new bootstrap.Toast(document.getElementById('successToast'));
                toast.show();
                
                // Reset validation states
                document.querySelectorAll('.form-control').forEach(input => {
                    input.classList.remove('is-valid', 'is-invalid');
                });
            } else {
                throw new Error('Submission failed');
            }
        } catch (error) {
            console.error('Form submission error:', error);
            alert('Sorry, there was an error submitting your application. Please try again or contact us directly.');
        } finally {
            // Reset button state
            submitBtn.innerHTML = originalText;
            submitBtn.disabled = false;
        }
    });
});
</script>
</body>
</html> 